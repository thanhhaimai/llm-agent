# LLM Agent

A minimalist LLM Agent framework.

## Setup

Run `setup/setup.sh` to set up the development environment

NOTE: The setup script is idempotent, so it's okay if you re-run it.

Fill in your `GEMINI_API_KEY` in `.env.example`, then rename it to `.env` and source it

## Tech stack

- Pydantic, Gemini, BeautifulSoup, DuckDuckGo

# Example output

Default search behavior (5 entries)

```
uv run src/main.py "How to cook Pho?"
```

```
User input: How to cook Pho?
---
DecideAction: response=ActionResponse(thinking_process='To provide instructions on how to cook Pho, I need to first gather information on the cooking process. I will start by searching the web for Pho recipes.', action='search', action_input='Pho recipe', reason='Searching the web will provide me with a variety of Pho recipes, which I can then use to formulate a comprehensive set of instructions.')
---
SearchAction: result=DdgSearchResult(title='Pho Recipe (Vietnamese Noodle Soup) - The Woks of Life', href='https://thewoksoflife.com/pho-vietnamese-noodle-soup/', body='Learn how to make pho, a fragrant beef noodle soup with fresh toppings, from scratch. Follow the 4 key steps and secrets to make a proper pho broth, including charring, toasting, and adding fish sauce.')
SearchAction: result=DdgSearchResult(title='Pho (Vietnamese Noodle Soup) Recipe', href='https://www.allrecipes.com/recipe/228443/authentic-pho/', body='Learn how to make pho, a Vietnamese soup with bone broth, rice noodles, and thinly sliced beef, from scratch. Follow the detailed steps and tips to simmer the broth, soak the noodles, and garnish with fresh herbs and sauces.')
SearchAction: result=DdgSearchResult(title='Easy Homemade Pho - Tastes Better From Scratch', href='https://tastesbetterfromscratch.com/pho-noodle-soup/', body='Learn how to make pho soup with rice noodles, broth, and your choice of meat in less than an hour. This recipe is a quick and easy adaptation of the authentic Vietnamese dish, with fresh herbs and vegetables to top it off.')
SearchAction: result=DdgSearchResult(title='Pho Recipe (How to Make Vietnamese Noodle Soup)', href='https://theforkedspoon.com/pho-recipe/', body='Learn how to make pho, a popular Vietnamese soup with beef broth, rice noodles, and raw meat. Choose from two methods: a long and authentic version with marrow bones and spices, or a fast and easy version with beef brisket and chicken stock.')
SearchAction: result=DdgSearchResult(title='Vietnamese Pho recipe - RecipeTin Eats', href='https://www.recipetineats.com/vietnamese-pho-recipe/', body="Learn how to make authentic and traditional Vietnamese Pho soup with this easy to follow recipe. You'll need beef, bones, spices, noodles and toppings to create the best Pho broth at home.")
---
DecideAction: response=ActionResponse(thinking_process='The previous research gives a good overview of making Pho, mentioning key steps like preparing the broth (charring, toasting, adding fish sauce, simmering), choosing between long/authentic and quick/easy methods, and using bones, spices, noodles and toppings. To provide a more complete answer, I will search for a recipe that breaks down the process into clear, actionable steps.', action='search', action_input='detailed pho recipe with step by step instructions', reason='To find a comprehensive recipe with specific instructions for cooking pho.')
---
SearchAction: result=DdgSearchResult(title='Authentic Vietnamese Pho Recipe: A Step-by-Step Guide', href='https://phobistrobarrie.com/recipe/vietnamese-pho', body='Step-by-Step Instructions Step 1. Building the Rich Pho Broth. Preheat oven to 425°F (220°C). Place beef bones on a foil-lined baking sheet, spray with oil, and roast for 30-40 minutes until deep brown. Cut ginger in half, quarter onions (leave skin on). Place on a foil-lined baking sheet, coat with oil, and broil for 10-12 minutes until charred.')
SearchAction: result=DdgSearchResult(title='Classic Pho Recipe (with Step-by-step Video ... - How To Cook.Recipes', href='https://www.howtocook.recipes/classic-pho-recipe/', body="Pho Ingredients. Pho broth recipe - You'll make this with onion, ginger, star anise, cloves, cinnamon sticks, cardamom pods, coriander seeds, beef stock, brown sugar, fish sauce, and salt to taste.; Thinly-sliced steak - Keep it raw as it will cook in the broth.; Rice noodles - When making Pho noodles, cook them as you will prepare them as the package instructs at the right time.")
SearchAction: result=DdgSearchResult(title='How to Make Authentic Vietnamese Pho Recipe (Step by Step)', href='https://lightpassingthrough.com/how-to-make-authentic-vietnamese-pho-step-by-step/', body='Step 3. With the stove still on medium high, throw in the remaining ingredients for the broth EXCEPT for the fish sauce. This includes the tiny cinnamon stick, two bags from the "pho Hoa" package (red box), all 4 cubes from the Vien gia vi Pho box (yellow box), and the 8-10 pieces of star anise.')
SearchAction: result=DdgSearchResult(title='How to Make Authentic Vietnamese Pho (Pho Bo)', href='https://www.cooking-therapy.com/traditional-vietnamese-pho-recipe/', body="The meats are the key to any good authentic beef pho recipe. The first step in creating a good pho is of course creating the broth. It took me a very long time to perfect my pho broth because my mom's recipe wasn't perfect. ... This Vietnamese Pho recipe is a detailed guide on how to make your own pho noodle soup. 4.85 from 19 ratings ...")
SearchAction: result=DdgSearchResult(title='Step-by-Step Guide to Making Pho - Food & Wine', href='https://www.foodandwine.com/soup/how-make-pho', body='Photo © Matthew Armendariz - mattbites.com. Add the onion and ginger to the pot along with the bay leaves, cinnamon sticks, rock sugar, and 1 tablespoon of kosher salt.')
---
DecideAction: response=ActionResponse(thinking_process='The previous research provides a good foundation for understanding how to cook pho, including the key steps of making the broth, preparing the noodles, and adding toppings. However, I need to consolidate this information into a clear and concise set of instructions. It might be helpful to search for a well-regarded recipe to use as a baseline.', action='search', action_input='best pho recipe', reason="To find a reliable and comprehensive pho recipe that I can use to synthesize the information I already have and provide a clear answer to the user's question.")
---
SearchAction: result=DdgSearchResult(title='Pho Recipe (Vietnamese Noodle Soup) - The Woks of Life', href='https://thewoksoflife.com/pho-vietnamese-noodle-soup/', body='Learn how to make pho, a fragrant beef noodle soup with fish sauce, spices, and aromatic toppings. Follow the 4 key steps and secrets to make a proper pho broth, from pre-boiling the bones to toasting the spices.')
SearchAction: result=DdgSearchResult(title='Easy Homemade Pho - Tastes Better From Scratch', href='https://tastesbetterfromscratch.com/pho-noodle-soup/', body="Learn how to make pho soup with rice noodles, broth, and your choice of meat in less than an hour. This recipe is not authentic, but it's quick, easy, and delicious with fresh garnishes and spices.")
SearchAction: result=DdgSearchResult(title='Vietnamese Pho recipe - RecipeTin Eats', href='https://www.recipetineats.com/vietnamese-pho-recipe/', body="Learn how to make authentic and traditional Vietnamese Pho soup with this easy to follow recipe. You'll need beef, bones, spices, noodles and toppings to create the best Pho broth at home.")
SearchAction: result=DdgSearchResult(title='Pho Recipe (How to Make Vietnamese Noodle Soup)', href='https://theforkedspoon.com/pho-recipe/', body='This unbelievably delicious Vietnamese Pho Recipe is made with a nourishing beef broth infused with fragrant spices, chewy noodles, and tender slices of meat. Filled with the same delicious and authentic flavors as your favorite pho restaurant, learn how to make this Vietnamese Noodle Soup from scratch and serve topped with fresh herbs and vegetables.')
SearchAction: result=DdgSearchResult(title='Pho (Vietnamese Noodle Soup) Recipe', href='https://www.allrecipes.com/recipe/228443/authentic-pho/', body='Learn how to make pho, a Vietnamese soup with bone broth, rice noodles, and thinly sliced beef, from scratch. Follow the detailed steps and tips to simmer the broth, soak the noodles, and garnish with fresh herbs and sauces.')
---
DecideAction: response=ActionResponse(thinking_process='The previous research provides some information on how to cook Pho. However, I need to consolidate this information into a step-by-step guide. I can start by using the search tool to find a comprehensive recipe for Pho.', action='search', action_input='authentic pho recipe step by step', reason="To find a detailed, step-by-step recipe for authentic Vietnamese Pho to answer the user's question.")
---
SearchAction: result=DdgSearchResult(title='Authentic Vietnamese Pho Recipe: A Step-by-Step Guide', href='https://phobistrobarrie.com/recipe/vietnamese-pho', body='Building the Rich Pho Broth Step 2. Preparing the Noodles and Garnishes. Cook rice noodles according to package directions and rinse well. Preparing the Noodles and Garnishes Step 3. Seasoning the Broth. Remove bones and strain broth through a mesh strainer. Season with fish sauce and sugar to taste. Seasoning the Broth Step 4. Assembling the Pho')
SearchAction: result=DdgSearchResult(title='How to Make Authentic Vietnamese Pho Recipe (Step by Step)', href='https://lightpassingthrough.com/how-to-make-authentic-vietnamese-pho-step-by-step/', body='Recipe for Authentic Vietnamese Pho (12-16 Servings) For the Broth. 1 Large White Onion; 5-6 Medium Shallots; 1 Large chunk of ginger or a few smaller chunks; 2 lbs of Quality Beef Bones; ... Step 1. Preheat your oven to 450. We use a little toaster oven that gets the job done. Then peel the onion, the shallots, and the ginger to roast in the oven.')
SearchAction: result=DdgSearchResult(title='How to Make Authentic Pho at Home | Step-by-Step Recipe for Vietnamese Pho', href='https://www.youtube.com/watch?v=qPfw9iboEog', body='Learn how to make authentic pho with this easy step-by-step recipe. From the rich broth to the perfect noodles and fresh herbs, discover how to recreate this...')
SearchAction: result=DdgSearchResult(title='Authentic Vietnamese Pho recipes | Step by step to make Pho at home ...', href='https://www.youtube.com/watch?v=s1hO3IuZiiA', body='Authentic Vietnamese Pho recipes | Step by step to make Pho at home | Cooking compilations # 2Chapters00:00 Vietnamese beef Pho15:05 Beef Sate Pho20:52 Chick...')
SearchAction: result=DdgSearchResult(title='Classic Pho Recipe (with Step-by-step Video ... - How To Cook.Recipes', href='https://www.howtocook.recipes/classic-pho-recipe/', body="Pho Ingredients. Pho broth recipe - You'll make this with onion, ginger, star anise, cloves, cinnamon sticks, cardamom pods, coriander seeds, beef stock, brown sugar, fish sauce, and salt to taste.; Thinly-sliced steak - Keep it raw as it will cook in the broth.; Rice noodles - When making Pho noodles, cook them as you will prepare them as the package instructs at the right time.")
---
DecideAction: response=ActionResponse(thinking_process='The previous research provides a lot of details on how to make pho, including broth preparation, noodle preparation, and ingredient lists. It would be beneficial to consolidate the information into a comprehensive guide. I will now formulate an answer that summarizes the key steps in making pho.', action='answer', action_input="To cook pho, here's a consolidated guide based on the provided research:\n\n1.  **Broth Preparation:**\n    *   **Roast Bones & Aromatics:** Preheat oven to 425-450°F (220-232°C). Roast beef bones (marrow bones are recommended for a richer broth) and aromatics like onion, shallots, and ginger until browned and charred. Roasting time varies from 30-40 minutes for bones and 10-12 minutes (broiling) for aromatics. Roasting brings out the flavors.\n    *   **Simmer the Broth:** Combine roasted bones and aromatics in a large pot with water. Add spices such as star anise, cloves, cinnamon sticks, cardamom pods, and coriander seeds. Some recipes also suggest adding bay leaves. The 'pho Hoa' package (red box) and Vien gia vi Pho box (yellow box) are also mentioned in one of the sources.  Simmer for a long time to extract maximum flavor.  Some suggest pre-boiling the bones before simmering to clean them.\n    *   **Season the Broth:** Strain the broth through a mesh strainer to remove solids. Season with fish sauce, brown sugar (or rock sugar), and salt to taste.\n\n2.  **Noodle Preparation:**\n    *   Cook rice noodles according to package directions. Rinse well after cooking.\n\n3.  **Assembly:**\n    *   Thinly slice steak (keep it raw as it will cook in the broth). Other meats like beef brisket or chicken can also be used.\n    *   Place cooked noodles in a bowl.\n    *   Add sliced meat.\n    *   Ladle hot broth over the noodles and meat.\n    *   Garnish with fresh herbs (like cilantro, mint, and basil), bean sprouts, sliced onions, lime wedges, and sauces (like hoisin and sriracha).\n\nKey ingredients often include beef bones, beef (steak or brisket), rice noodles, onion, ginger, star anise, cloves, cinnamon sticks, fish sauce, and garnishes.\n\nSome recipes aim for speed and ease using beef brisket and chicken stock. Others emphasize authentic methods using marrow bones and a long simmering time.", reason='The answer consolidates the key steps and ingredients from the provided documents into a comprehensive guide on how to cook pho. It covers broth preparation, noodle preparation, and assembly, along with variations for quicker or more authentic versions.')
---
AnswerAction: input="To cook pho, here's a consolidated guide based on the provided research:\n\n1.  **Broth Preparation:**\n    *   **Roast Bones & Aromatics:** Preheat oven to 425-450°F (220-232°C). Roast beef bones (marrow bones are recommended for a richer broth) and aromatics like onion, shallots, and ginger until browned and charred. Roasting time varies from 30-40 minutes for bones and 10-12 minutes (broiling) for aromatics. Roasting brings out the flavors.\n    *   **Simmer the Broth:** Combine roasted bones and aromatics in a large pot with water. Add spices such as star anise, cloves, cinnamon sticks, cardamom pods, and coriander seeds. Some recipes also suggest adding bay leaves. The 'pho Hoa' package (red box) and Vien gia vi Pho box (yellow box) are also mentioned in one of the sources.  Simmer for a long time to extract maximum flavor.  Some suggest pre-boiling the bones before simmering to clean them.\n    *   **Season the Broth:** Strain the broth through a mesh strainer to remove solids. Season with fish sauce, brown sugar (or rock sugar), and salt to taste.\n\n2.  **Noodle Preparation:**\n    *   Cook rice noodles according to package directions. Rinse well after cooking.\n\n3.  **Assembly:**\n    *   Thinly slice steak (keep it raw as it will cook in the broth). Other meats like beef brisket or chicken can also be used.\n    *   Place cooked noodles in a bowl.\n    *   Add sliced meat.\n    *   Ladle hot broth over the noodles and meat.\n    *   Garnish with fresh herbs (like cilantro, mint, and basil), bean sprouts, sliced onions, lime wedges, and sauces (like hoisin and sriracha).\n\nKey ingredients often include beef bones, beef (steak or brisket), rice noodles, onion, ginger, star anise, cloves, cinnamon sticks, fish sauce, and garnishes.\n\nSome recipes aim for speed and ease using beef brisket and chicken stock. Others emphasize authentic methods using marrow bones and a long simmering time."
```

This example artificially constrain the SearchAction to only `1` result, thus encourage it to use `deepsearch`.

```
uv run src/main.py "How to cook Pho?"
```

```
User input: How to cook Pho?
---
DecideAction: response=ActionResponse(thinking_process="The user is asking how to cook Pho. I don't have any information about this, so I should search the web for it.", action='search', action_input='how to cook pho', reason='To find information about how to cook Pho.')
---
SearchAction: knowledge='Pho Recipe (Vietnamese Noodle Soup) - The Woks of Life\nhttps://thewoksoflife.com/pho-vietnamese-noodle-soup/\nLearn how to make pho, a fragrant beef noodle soup with fresh toppings, from scratch. Follow the 4 key steps and secrets to make a proper pho broth, including pre-boiling, charring, toasting, and adding fish sauce.'
---
DecideAction: response=ActionResponse(thinking_process='The previous research provides a high-level overview of making Pho. To provide a more comprehensive answer, I should search for additional resources that provide specific steps and ingredient lists.', action='search', action_input='Pho recipe detailed steps', reason='The search action will help me find detailed recipes for Pho.')
---
SearchAction: knowledge="Mastering Pho: A Complete Guide to Vietnamese Noodle Soup - CulinaryBite\nhttps://culinarybite.com/articles/how-to-make-pho-step-by-step-recipe/\nDiscover the art of making Pho with our detailed step-by-step recipe. 🍜 Learn about ingredient choices, ... In summary, noodle preparation in pho isn't just a step; it's an art form in its own right. By paying attention to the way you cook and assemble your noodles, you're setting the stage for a spectacular culinary experience. ..."
---
DecideAction: response=ActionResponse(thinking_process='The previous research provides some high-level steps and information on making Pho. To give a more complete answer, I should search for a detailed recipe that includes ingredient lists, step-by-step instructions, and cooking times.', action='search', action_input='detailed pho recipe', reason='A search for "detailed pho recipe" will provide a recipe including specific instructions.')
---
SearchAction: knowledge='Pho Recipe (Vietnamese Noodle Soup) - The Woks of Life\nhttps://thewoksoflife.com/pho-vietnamese-noodle-soup/\nPho (Vietnamese Noodle Soup) has long been one of my absolute favorite things to eat. There has been more than one occasion in which I have actually gotten in my car and driven over 45 minutes for the express purpose of indulging in good bowl of the stuff, which is why this pho recipe is sorely needed.'
---
DecideAction: response=ActionResponse(thinking_process='The previous research provides some general information on how to make Pho, including key steps like pre-boiling, charring, toasting and adding fish sauce to the broth. I will perform a search to gather more information.', action='search', action_input='how to make pho recipe', reason='To get a more complete overview of the pho-making process and different recipes.')
---
SearchAction: knowledge='Pho Recipe (Vietnamese Noodle Soup) - The Woks of Life\nhttps://thewoksoflife.com/pho-vietnamese-noodle-soup/\nAdd 5 quarts fresh water back to the stockpot and bring to a boil. Transfer the bones and meat back to the pot, along with the charred/cleaned ginger and onions. Add the scallions, fish sauce and rock sugar.Reduce the heat to low, and simmer until the beef chuck is tender, about 40 minutes.'
---
DecideAction: response=ActionResponse(thinking_process='The previous research provides some basic steps on how to make Pho but lacks specific details like ingredient quantities and detailed instructions for each step. I need to consolidate information and possibly find additional recipes to provide a comprehensive guide.', action='search', action_input='detailed pho recipe with ingredient quantities and step-by-step instructions', reason='To gather more specific information on how to cook Pho, including ingredient amounts and more detailed cooking instructions, a web search is necessary.')
---
SearchAction: knowledge='Authentic Vietnamese Pho Recipe: A Step-by-Step Guide\nhttps://phobistrobarrie.com/recipe/vietnamese-pho\nStep-by-Step Instructions Step 1. Building the Rich Pho Broth. Preheat oven to 425°F (220°C). Place beef bones on a foil-lined baking sheet, spray with oil, and roast for 30-40 minutes until deep brown. Cut ginger in half, quarter onions (leave skin on). Place on a foil-lined baking sheet, coat with oil, and broil for 10-12 minutes until charred.'
---
DecideAction: response=ActionResponse(thinking_process='The existing research provides some good starting points for cooking Pho, particularly around building the broth. Key steps include pre-boiling bones, charring aromatics, and simmering for an extended period. I want to solidify my understanding of the different components of Pho and then formulate a recipe using the details extracted from the research. First, I will search for different Pho recipes.', action='search', action_input='different pho recipes', reason='To compare and contrast existing recipes and synthesize a comprehensive set of instructions.')
---
SearchAction: knowledge='9 Best Pho Recipes to Savor at Home - eatproteins.com\nhttps://eatproteins.com/9-best-pho-recipes/\nPho is a beloved Vietnamese soup that has gained popularity worldwide for its rich flavors and comforting nature. I have explored various recipes to find the best ways to prepare this dish at home. In this article, I will share nine of the best pho recipes that can help you create your own delicious bowls of this traditional soup.'
---
DecideAction: response=ActionResponse(thinking_process='The previous research provides some steps on how to make pho, including the importance of the broth, roasting bones, and adding spices. I need to consolidate this information into a more coherent, step-by-step instruction on how to cook pho. I will use the deepsearch action to explore the provided URLs and refine the cooking instructions.', action='deepsearch', action_input='https://thewoksoflife.com/pho-vietnamese-noodle-soup/', reason='This URL appears multiple times in the research and thus likely contains detailed information about the cooking process.')
---
DeepSearchAction: text="Pho Recipe (Vietnamese Noodle Soup) - The Woks of Life Skip to primary navigation Skip to privacy navigation Skip to recipes navigation Skip to main content Skip to primary sidebar Facebook Instagram Pinterest YouTube Search The Woks of Life a culinary genealogy Main Menu Display Search Bar Surprise Me! Search Recipes Recipe Index All Posts by Date Our Cookbook: NOW AVAILABLE! Videos How-To Cooking Methods Cooking Tools Wok Guide Garden/Farm Culture Ingredients Chinese Ingredients Glossary Sauces, Wines, Vinegars & Oils Spices & Seasonings Dried, Cured & Pickled Ingredients Noodles & Wrappers Rice, Grains, Flours & Starches Tofu, Bean Curd & Seitan Vegetables & Fungi Fresh Herbs & Aromatics Life & Travel Family Life Travel With Us About Us Contact Press Work with Us Send Us A Message Facebook Instagram Pinterest YouTube Join Our Newsletter And Receive Our Free Top 25 Recipes Book! Subscribe Tap here to receive our FREE top 25 recipe book! Home Recipes Noodles & Pasta Pho (Vietnamese Noodle Soup) Pho (Vietnamese Noodle Soup) by: Sarah 440 Comments Jump to Recipe Posted: 9/05/2023 Updated: 9/05/2023 Pho (Vietnamese Noodle Soup) has long been one of my absolute favorite things to eat. There has been more than one occasion in which I have actually gotten in my car and driven over 45 minutes for the express purpose of indulging in good bowl of the stuff, which is why this pho recipe is sorely needed. Note: We originally published this recipe in March 2015. We have since added clearer photos, nutrition info, and metric measurements. The recipe has been tested by us and many readers and approved by Vietnamese friends, so it remains the same! What Is Pho? Pho (I found out in college that it’s actually pronounced “fuh.” For someone who’d been shamelessly calling it “foe” for eighteen years, this was an embarrassing revelation) is a noodle soup hailing from Vietnam that’s often made with beef and topped with awesome things like fresh bean sprouts, basil, and chilies. There’s just something about it—the fragrant beef broth, the slightly chewy rice noodles, and all the aromatic toppings (the squeeze of lime at the end is the BEST)—that seriously justifies a 90-minute roundtrip drive. The Quest For a Great Broth A bowl of pho is only as good as the broth. There’s no trick to the noodles, really, and the beef is often added to the soup raw. The other vegetable and herb toppings are ALL added to the soup raw. In short? No broth, no bacon. I never really thought it would be realistic to make it myself at home. Chalk it up to a cynical but somewhat substantiated opinion that no broth I could make at home would ever taste as good as the restaurant equivalent. We decided to take a stab at it anyway, and the results were awesome. I also talked with a Vietnamese friend/mom who cooks this dish on a regular basis for her family and got all the tips! Her kids are in college, but she says they always come home for her pho! There is a bit of prep involved to get the broth going, but after that, it’s just a long, slow simmer until you’re ready to assemble the dish. 4 Key Steps to Make Pho Broth Here are the 4 steps and secrets to making a proper beef pho broth: Pre-boiling the beef bones and meat Charring the ginger and onions Toasting the spices Adding fish sauce (said Vietnamese friend told me that one of the secrets to a great pho recipe is to not add salt, and instead add enough fish sauce to bring the broth to the correct level of saltiness.) I know, it’s a lot of fish sauce ! However, she said that this method tastes the best, but most people don’t do it because fish sauce is so expensive. She also mentioned, rather proudly, that the Vietnamese brands of fish sauce are much more flavorful (and expensive at $9-$12 a bottle) than the Thai brands most people buy. Which is just food for thought. In accordance with this insider information, feel free to add more fish sauce to the broth and decrease the amount of salt. As is our mantra here at The Woks of Life , it’s all up to your own taste preferences! Oh, and definitely buy a high quality fish sauce for this pho recipe. It will only make your broth better! We like Red Boat ! Pho Recipe Instructions Making the Broth Place the bones and beef chuck in large stockpot, and add water to cover. Bring to a boil, and boil for 5 minutes. Drain in a colander and thoroughly clean the stockpot. This process removes any impurities/scum, and will give you a much cleaner broth. Meanwhile, char your ginger and onions. Use tongs to hold the ginger and onions (one at a time) over an open flame, or place each directly on a gas burner. (You can also do this on a grill.) Turn until they’re lightly blackened and fragrant, about 5 minutes. Rinse away all the blackened skins. Add 5 quarts fresh water back to the stockpot and bring to a boil. Transfer the bones and meat back to the pot, along with the charred/cleaned ginger and onions. Add the scallions, fish sauce and rock sugar . Reduce the heat to low, and simmer until the beef chuck is tender, about 40 minutes. Skim the surface often to remove any foam and fat. Remove one piece of the chuck and transfer to a bowl of ice water to stop the cooking process. Then transfer this piece of beef to a container and refrigerate (you will slice this to serve with your pho later. If you were to leave it in the pot, it would be too dry to eat). Leave the other piece of chuck in the pot to flavor the broth. Now toast the spices (star anise, cloves, cinnamon stick, cardamom pod (if using), fennel seeds, and coriander seeds) in a dry pan over medium low heat for about 3 minutes, until fragrant. Use kitchen string to tie up the spices in a piece of cheesecloth, and add it to the broth. Cover the pot and continue simmering for another 4 hours. Add the salt and continue to simmer, skimming as necessary, until you’re ready to assemble the rest of the dish. Taste the broth and adjust seasoning by adding more salt, sugar, and/or fish sauce as needed. Assembling the Pho To serve, boil the noodles according to package instructions. Add to a bowl. Place a few slices of the beef chuck and the raw sirloin on the noodles. Bring the broth to a rolling boil and ladle it into each bowl. The hot broth will cook the beef. Garnish with your toppings—sliced chili, onion, scallions, cilantro, bean sprouts, and Thai basil, and be sure to take your lime wedges and squeeze a lot of fresh lime juice over the top! You can also add hoisin sauce and Sriracha if you like! Scroll down for the full list of ingredients and the recipe card. Short on time? Check out our Instant Pot Pho recipe and our 20-Minute Chicken Pho recipe as well! Mmmm. Pho noodle pull! Looking for more authentic recipes? Subscribe to our email list and be sure to follow us on Pinterest , Facebook , Instagram , and Youtube! 4.96 from 84 votes Pho Recipe Pho is a Vietnamese noodle soup topped with awesome things like fresh bean sprouts, basil, and chilies. This pho recipe was approved by a Vietnamese friend! by: Sarah serves: 8 servings Prep: 30 minutes minutes Cook: 5 hours hours 30 minutes minutes Total: 6 hours hours Print Rate Ingredients You’ll need: ▢ 2 3-inch (7 to 8 cm) pieces ginger, cut in half lengthwise (no need to peel) ▢ 2 onions (peeled) ▢ 5 pounds beef marrow or knuckle bones ▢ 2 pounds beef chuck (cut into 2 pieces) ▢ 5 quarts water ▢ 2 scallions (cut into 4-inch lengths) ▢ 1/3 cup fish sauce ▢ 2 ½ ounces rock sugar (2 1/2 tablespoons granulated sugar) ▢ 8 star anise ▢ 6 cloves ▢ 1 cinnamon stick ▢ 1 black cardamom pod (optional) ▢ 2 teaspoons fennel seeds ▢ 2 teaspoons coriander seeds ▢ 1 tablespoon salt ▢ 1 pound dried pho noodles ▢ 1/3 pound beef sirloin (slightly frozen, then sliced paper-thin against the grain) Garnishes: ▢ Sliced chili ▢ Thinly sliced onion ▢ Chopped scallions ▢ Cilantro ▢ Mung bean sprouts ▢ Thai basil ▢ Lime wedges ▢ Hoisin sauce and/or Sriracha (optional) US Customary – Metric Instructions Place the bones and beef chuck in large stockpot and add water to cover. Bring to a boil and boil for 5 minutes. Drain in a colander and thoroughly clean the stockpot. This process removes any impurities/scum and will give you a much cleaner broth. Meanwhile, char your ginger and onions. Use tongs to hold the ginger and onions (one at a time) over an open flame, or place each directly on a gas burner. Turn until they’re lightly blackened and fragrant, about 5 minutes. Rinse away all the blackened skins. Add water (5 quarts/4.75 L, or more/less if you've scaled the recipe up or down) to the stockpot and bring to a boil. Transfer the bones and meat back to the pot, along with the charred/cleaned ginger and onions. Add the scallions, fish sauce and sugar. Reduce the heat to low, and simmer until the beef chuck is tender, about 40 minutes. Skim the surface often to remove any foam and fat. Remove one piece of the chuck and transfer to a bowl of ice water to stop the cooking process. Then transfer this piece of beef to a container and refrigerate (you will slice this to serve with your pho later. If you were to leave it in the pot, it would be too dry to eat). Leave the other piece of chuck in the pot to flavor the broth. Now toast the spices (star anise, cloves, cinnamon stick, cardamom, fennel seeds, and coriander seeds) in a dry pan over medium low heat for about 3 minutes, until fragrant. Use kitchen string to tie up the spices in a piece of cheesecloth, and add it to the broth. Cover the pot and continue simmering for another 4 hours. Add the salt and continue to simmer, skimming as necessary, until you're ready to assemble the rest of the dish. Taste the broth and adjust seasoning by adding more salt, sugar, and/or fish sauce as needed. To serve, boil the noodles according to package instructions. Add to a bowl. Place a few slices of the beef chuck and the raw sirloin on the noodles. Bring the broth to a rolling boil and ladle it into each bowl. The hot broth will cook the beef. Garnish with your toppings, and be sure to squeeze a lot of fresh lime juice over the top! nutrition facts Calories: 495 kcal (25%) Carbohydrates: 68 g (23%) Protein: 30 g (60%) Fat: 11 g (17%) Saturated Fat: 5 g (25%) Cholesterol: 69 mg (23%) Potassium: 1106 mg (32%) Fiber: 3 g (12%) Sugar: 14 g (16%) Vitamin A: 270 IU (5%) Vitamin C: 14.9 mg (18%) Calcium: 95 mg (10%) Iron: 4.4 mg (24%) nutritional info disclaimer TheWoksofLife.com is written and produced for informational purposes only. While we do our best to provide nutritional information as a general guideline to our readers, we are not certified nutritionists, and the values provided should be considered estimates. Factors such as brands purchased, natural variations in fresh ingredients, etc. will change the nutritional information in any recipe. Various online calculators also provide different results, depending on their sources. To obtain accurate nutritional information for a recipe, use your preferred nutrition calculator to determine nutritional information with the actual ingredients and quantities used. Did You Make This? Tag us on Instagram @thewoksoflife , subscribe to our email list , and be sure to follow us on social for more recipes! @thewoksoflife You may also like… Spicy Beef Noodle Soup Lanzhou Beef Noodle Soup Braised Beef Noodle Soup (红烧牛肉面) Shanghai Home-style Noodle Soup About Sarah Sarah Leung is the eldest daughter in The Woks of Life family, working alongside younger sister Kaitlin and parents Bill and Judy. You could say this multigenerational recipe blog was born out of two things: 1) her realization in college that she had no idea how to make her mom’s Braised Pork Belly and 2) that she couldn’t find a job after graduation. With the rest of the family on board, she laid the groundwork for the blog in 2013. By 2015, it had become one of the internet’s most trusted resources for Chinese cooking. Creator of quick and easy recipes for harried home cooks and official Woks of Life photographer, Sarah loves creating accessible recipes that chase down familiar nostalgic flavors while adapting to the needs of modern home cooks. Alongside her family, Sarah has become a New York Times Bestselling author with their cookbook, The Woks of Life: Recipes to Know and Love from a Chinese American Family, as well as a James Beard Award nominee and IACP Award finalist. Previous Post Thai Beef Salad Next Post Miso Fish (Just 4 Ingredients!) Subscribe Notify of new follow-up comments new replies to my comments Label Rate this recipe: Rate this recipe: Name* Email* Δ Label Rate this recipe: Rate this recipe: Name* Email* Δ This site uses Akismet to reduce spam. Learn how your comment data is processed . 440 Comments Newest Oldest Most Voted Inline Feedbacks View all comments Load More Comments Primary Sidebar Welcome! We’re Sarah, Kaitlin, Judy, and Bill– a family of four cooks sharing our home-cooked and restaurant-style recipes. Our Story 25 Top Recipes TOP 25 RECIPES free eBook Subscribe for the latest updates on new recipes, and get started with our family's Top 25 Recipe eBook! Get It Now Cooking Tools Wok Guide Ingredients 101 Kitchen Wisdom Surprise Me! Sign Up For Email Updates & Receive Our Top 25 Recipes Ebook! Leave this field empty if you're human: Our Family Favorites bill's pick Beef and Broccoli judy's pick Asian Milk Bread sarah's pick Chicken Adobo kaitlin's pick Mapo Tofu Sign Up For Email Updates & Receive Our Top 25 Recipes Ebook! Leave this field empty if you're human: “I am proud to say that your genealogy has been the sole tutorial for my Asian-inspired culinary adventures for years; probably since you began. Time and again, my worldwide web pursuits for solid recipes that I know my family will eat has landed me back here.” Beth, Community Member Since 2013 Search Facebook Instagram Pinterest YouTube ©\xa02013–2025 The Woks of Life Privacy Policy Disclaimer Site Credits Site design by Melissa Rose Design Logo & Illustrations by Sasa Khalisa Developed by Once Coupled Back To Top Opens in a new window Opens an external site Opens an external site in a new window Get Updates On New Recipes & Our Free Recipe Ebook! I consent to receive emails from The Woks of Life. wpDiscuz Insert"
---
DecideAction: response=ActionResponse(thinking_process='The previous research provides a good overview of how to cook Pho, including key steps and ingredients. I can now consolidate the information into a comprehensive answer.', action='answer', action_input="To cook Pho, here's a consolidated guide based on the provided recipes:\n\n1.  **Prepare the Broth:**\n    *   **Pre-boil:** Place beef bones and beef chuck in a large stockpot, cover with water, and boil for 5 minutes. Drain and clean the pot and bones to remove impurities.\n    *   **Char:** Char ginger and onions over an open flame or on a gas burner until lightly blackened and fragrant (about 5 minutes). Rinse away the blackened skins.\n    *   **Simmer:** Add fresh water (5 quarts) to the stockpot. Return the bones, meat, charred ginger, and onions to the pot. Add scallions, fish sauce, and rock sugar. Reduce heat and simmer until the beef chuck is tender (about 40 minutes). Skim the surface often.\n    *   **Toast Spices:** Toast spices (star anise, cloves, cinnamon stick, cardamom pod (optional), fennel seeds, and coriander seeds) in a dry pan over medium-low heat until fragrant (about 3 minutes). Tie spices in cheesecloth and add to the broth.\n    *   **Simmer Again:** Cover the pot and continue simmering for another 4 hours. Add salt and continue to simmer, skimming as necessary. Taste and adjust seasoning with more salt, sugar, and/or fish sauce as needed. High-quality fish sauce, preferably a Vietnamese brand like Red Boat, is recommended.\n\n2.  **Prepare the Beef:**\n    *   After the initial 40-minute simmer, remove one piece of the beef chuck and transfer it to ice water to stop cooking. Refrigerate this piece to slice later for serving.\n\n3.  **Prepare Noodles & Serve:**\n    *   Boil dried pho noodles according to package instructions.\n    *   Add noodles to a bowl.\n    *   Place a few slices of the cooked beef chuck and thinly sliced raw sirloin on the noodles.\n    *   Bring the broth to a rolling boil and ladle it into each bowl. The hot broth will cook the raw beef.\n    *   Garnish with sliced chili, thinly sliced onion, chopped scallions, cilantro, mung bean sprouts, and Thai basil. Serve with lime wedges, hoisin sauce, and Sriracha (optional).\n\n**Key Tips:**\n\n*   Pre-boiling the bones is crucial for a clean broth.\n*   Charring ginger and onions adds depth of flavor.\n*   Fish sauce is key to the broth's saltiness, but use good quality.\n*   Simmering for a long time is essential for a rich broth.", reason='The information from the previous research has been synthesized to create a guide for cooking Pho. The guide includes steps for preparing the broth, beef, and noodles, along with key tips for success.')
---
AnswerAction: input="To cook Pho, here's a consolidated guide based on the provided recipes:\n\n1.  **Prepare the Broth:**\n    *   **Pre-boil:** Place beef bones and beef chuck in a large stockpot, cover with water, and boil for 5 minutes. Drain and clean the pot and bones to remove impurities.\n    *   **Char:** Char ginger and onions over an open flame or on a gas burner until lightly blackened and fragrant (about 5 minutes). Rinse away the blackened skins.\n    *   **Simmer:** Add fresh water (5 quarts) to the stockpot. Return the bones, meat, charred ginger, and onions to the pot. Add scallions, fish sauce, and rock sugar. Reduce heat and simmer until the beef chuck is tender (about 40 minutes). Skim the surface often.\n    *   **Toast Spices:** Toast spices (star anise, cloves, cinnamon stick, cardamom pod (optional), fennel seeds, and coriander seeds) in a dry pan over medium-low heat until fragrant (about 3 minutes). Tie spices in cheesecloth and add to the broth.\n    *   **Simmer Again:** Cover the pot and continue simmering for another 4 hours. Add salt and continue to simmer, skimming as necessary. Taste and adjust seasoning with more salt, sugar, and/or fish sauce as needed. High-quality fish sauce, preferably a Vietnamese brand like Red Boat, is recommended.\n\n2.  **Prepare the Beef:**\n    *   After the initial 40-minute simmer, remove one piece of the beef chuck and transfer it to ice water to stop cooking. Refrigerate this piece to slice later for serving.\n\n3.  **Prepare Noodles & Serve:**\n    *   Boil dried pho noodles according to package instructions.\n    *   Add noodles to a bowl.\n    *   Place a few slices of the cooked beef chuck and thinly sliced raw sirloin on the noodles.\n    *   Bring the broth to a rolling boil and ladle it into each bowl. The hot broth will cook the raw beef.\n    *   Garnish with sliced chili, thinly sliced onion, chopped scallions, cilantro, mung bean sprouts, and Thai basil. Serve with lime wedges, hoisin sauce, and Sriracha (optional).\n\n**Key Tips:**\n\n*   Pre-boiling the bones is crucial for a clean broth.\n*   Charring ginger and onions adds depth of flavor.\n*   Fish sauce is key to the broth's saltiness, but use good quality.\n*   Simmering for a long time is essential for a rich broth."
```

Another prompt with easy answer. Only need to search once.

```
uv run src/main.py "Where does the name Vivian come from?"
```

```
User input: Where does the name Vivian come from?
---
DecideAction: response=ActionResponse(thinking_process='The question is about the origin of the name Vivian. I need to find information about the etymology and history of the name.', action='search', action_input='origin of the name Vivian', reason='I need to search the web to gather information about the etymology and history of the name Vivian.')
---
SearchAction: result=DdgSearchResult(title='Vivian (personal name) - Wikipedia', href='https://en.wikipedia.org/wiki/Vivian_(personal_name)', body='Vivian (and variants such as Vivien and Vivienne) is a given name, and less often a surname, derived from a Latin name of the Roman Empire period, masculine Vivianus and feminine Viviana, which survived into modern use because it is the name of two early Christian female martyrs as well as of a male saint and bishop.')
SearchAction: result=DdgSearchResult(title='Meaning, origin and history of the name Vivian', href='https://www.behindthename.com/name/vivian', body='Saint Vivian was a French bishop who provided protection during the Visigoth invasion of the 5th century. It has been occasionally used as an English (masculine) name since the Middle Ages. In modern times it is also used as a feminine name, in which case it is either an Anglicized form of Bébinn or a variant of Vivien 2.')
SearchAction: result=DdgSearchResult(title='Vivian Name Meaning: Origin, Popularity, & Significance', href='https://nameoftheyear.com/vivian-name-meaning/', body="Vivian Name Origin & Meaning If ya're interested in the origin & meaning of the name Vivian, ya've come to the right place. In this section, we'll explore the Latin roots of the name & its various connotations. We'll also discuss the historical usage of Vivian as a masculine & feminine name, as well as some popular variants & nicknames. Latin Roots & Meaning The name Vivian is derived ...")
SearchAction: result=DdgSearchResult(title='Vivian - Baby Name Meaning, Origin, and Popularity', href='https://nameberry.com/b/girl-baby-name-vivian', body='Vivian is a girl\'s name of Latin origin meaning "life". Vivian is the 87 ranked female name by popularity.')
SearchAction: result=DdgSearchResult(title='Vivian: Name Meaning, Popularity and Info on BabyNames.com', href='https://babynames.com/name/vivian', body='The name Vivian is primarily a female name of Latin origin that means Alive. Click through to find out more information about the name Vivian on BabyNames.com.')
---
DecideAction: response=ActionResponse(thinking_process='The previous research provides a solid foundation for answering the question. The name Vivian is derived from Latin roots, specifically the Latin name Vivianus (masculine) and Viviana (feminine), meaning "alive". I will formulate an answer based on this information.', action='answer', action_input='The name Vivian comes from the Latin name Vivianus (masculine) and Viviana (feminine), which mean "alive".', reason='The existing research provides a direct answer to the question, making it unnecessary to search for further information.')
---
AnswerAction: input='The name Vivian comes from the Latin name Vivianus (masculine) and Viviana (feminine), which mean "alive".'
```

## Acknowledgement

Many thanks to https://zacharyhuang.substack.com/p/llm-agent-internal-as-a-graph-tutorial
